<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS-->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
    <title>Googlemap.pro</title>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries-->
    <!--if lt IE 9
    script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
    script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
    -->
  </head>
  <body class="sidebar-mini fixed">
    <div class="wrapper">
      <!-- Navbar-->
      <header class="main-header hidden-print"><a class="logo" href="index.html">Googlemap.pro</a>
        <nav class="navbar navbar-static-top">
          <!-- Sidebar toggle button--><a class="sidebar-toggle" href="#" data-toggle="offcanvas"></a>
          <!-- Navbar Right Menu-->
          <div class="navbar-custom-menu">
            <ul class="top-nav">
              <!--Notification Menu-->
              <li class="dropdown notification-menu"><a class="dropdown-toggle" href="#" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell-o fa-lg"></i></a></li>
              <!-- User Menu-->
              <li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-user fa-lg"></i></a></li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- Side-Nav-->
      <aside class="main-sidebar hidden-print">
        <section class="sidebar">
          <div class="user-panel">
            <div class="pull-left image"><img class="img-circle" src="/images/logo.png" alt="User Image"></div>
            <div class="pull-left info">
              <p>Kabbi v.4.0.1</p>
              <p class="designation">Developer service</p>
            </div>
          </div>
          <!-- Sidebar Menu-->
          <ul class="sidebar-menu">
            <li class="active"><a href="index.html"><i class="fa fa-dashboard"></i><span>Главная</span></a></li>
            <li class="treeview"><a href="#"><i class="fa fa-laptop"></i><span>UserMap</span><i class="fa fa-angle-right"></i></a></li>
            <li><a href="charts.html"><i class="fa fa-pie-chart"></i><span>UserDirect</span></a></li>
            <li class="treeview"><a href="#"><i class="fa fa-edit"></i><span>UserSEO</span><i class="fa fa-angle-right"></i></a></li>
          </ul>
        </section>
      </aside>
      <div class="content-wrapper">
        <div class="page-title">
          <div>
            <h1><i class="fa fa-dashboard"></i> Google MAP developer service</h1>
            <p>Проверка координат, маршрутов и времени в пути</p>
          </div>
          <div>
            <ul class="breadcrumb">
              <li><i class="fa fa-home fa-lg"></i></li>
              <li><a href="#">Главная</a></li>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="card">
              <h3 class="card-title">Задание координат</h3>
              <div class="col-md-6">
                <div class="form-group has-success">
                    <label class="control-label" for="inputSuccess">Начала маршрута</label>
                    <input class="form-control" id="inputSuccess" type="text" value='55.573721, 37.566561'>
                </div>
              </div>  
            <div class="col-md-6">
                    <div class="form-group has-warning">
                      <label class="control-label" for="inputWarning">Конец маршрута</label>
                      <input class="form-control" id="inputWarning" type="text" value='55.574037, 37.590637'>
                    </div>
              </div>  
              
                <p><b>Включить альтернативные маршруты</b></p>
                  <div class="toggle-flip">
                    <label>
                      <input type="checkbox" id="flip_ind"><span class="flip-indecator" data-toggle-on="ВКЛ" data-toggle-off="ВЫКЛ"></span>
                    </label>
                  </div>
              
                <p class="mt-40 mb-20"><a class="btn btn-primary icon-btn mr-10" id='processing' href="#"><i class="fa fa-car"></i>Запустить обработку</a></p>
            </div>
          </div>
          <div class="col-md-8">
            <div class="card">
              <h3 class="card-title">Выдача GoogleMaps</h3>
                <div class="panel panel-primary">
                    <div class="panel-heading">
                          <h3 class="panel-title" id='out_title'>Информация о маршруте</h3>
                    </div>
                        <div class="panel-body" id='text_out'>Время, расстояние</div>
                </div>
                <div class="panel panel-info">
                    <div class="panel-heading">
                          <h3 class="panel-title">Маршрут движения</h3>
                    </div>
                        <div class="panel-body" id='route_text_out'>Маршрут</div>
                </div>
                
                <div class="panel panel-primary">
                    <div class="panel-heading">
                          <h3 class="panel-title" id='out_title_gootax'>Информация о маршруте ключ GOOTAX</h3>
                    </div>
                        <div class="panel-body" id='text_out_gootax'>Время, расстояние ключ GOOTAX</div>
                </div>
                <div class="panel panel-info">
                    <div class="panel-heading">
                          <h3 class="panel-title">Маршрут движения ключ GOOTAX</h3>
                    </div>
                        <div class="panel-body" id='route_text_out_gootax'>Маршрут</div>
                </div>
                
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Javascripts-->
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/pace.min.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript">
        $('#processing').click(function(e){
            var coord_start = $('#inputSuccess').val().split(', ');
            var x_coord_start = coord_start[0];
            var y_coord_start = coord_start[1];
            var coord_end = $('#inputWarning').val().split(', ');
            var x_coord_end = coord_end[0];
            var y_coord_end = coord_end[1];
            var alternative = $("#flip_ind").is(":checked");
            var complex_uri = 'get.php?xs='+x_coord_start+'&ys='+y_coord_start+'&xe='+x_coord_end+'&ye='+y_coord_end+'&alter='+alternative;
            var complex_uri2 = 'get2.php?xs='+x_coord_start+'&ys='+y_coord_start+'&xe='+x_coord_end+'&ye='+y_coord_end+'&alter='+alternative;
            var complex_uri3 = 'get3.php?xs='+x_coord_start+'&ys='+y_coord_start+'&xe='+x_coord_end+'&ye='+y_coord_end+'&alter='+alternative;

            $.ajax({
                  dataType: 'json',
                  url: complex_uri,
                  success: function(jsondata){
                       
                      
                                            var routes = jsondata.routes;
                                            $('#out_title').empty();
                                            $('#text_out').empty();
                                            $('#route_text_out').empty();
                                            $.each(routes,function(index,jsonres){
                                                                                var header_panel_info = jsonres.copyrights;
                                                                                $('#out_title').text(header_panel_info);
                                                                                var end_point = jsonres.legs[0].end_address;
                                                                                var start_point = jsonres.legs[0].start_address;
                                                                                var time_distance = jsonres.legs[0].duration.text;
                                                                                var time_distance_traffic = jsonres.legs[0].duration_in_traffic.text;
                                                                                var long_distance = jsonres.legs[0].distance.text;
                                                                                var steps_route = jsonres.legs[0].steps;
                                                                                $('#text_out').append('<hr>version '+index+'<hr>');
                                                                                $('#text_out').append('<p><span style="color: red;">Отправная точка:</span>&emsp;&emsp;&emsp;'+start_point+'</p>');
                                                                                $('#text_out').append('<p><span style="color: green;">Финиш:</span>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;'+end_point+'</p>');
                                                                                $('#text_out').append('<p><span style="color: blue;">Время в пути:</span>&emsp;&emsp;&emsp;&emsp;&emsp;'+time_distance+'</p>');
                                                                                $('#text_out').append('<p style="color: #e48100; font-weight: 900;"><span>Время с заторами:</span>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;'+time_distance_traffic+'</p>');
                                                                                $('#text_out').append('<p><span style="color: magenta;">Общее расстояние:</span>&emsp;&emsp;'+long_distance+'</p>');
                                                                                $('#route_text_out').append('<hr>version '+index+'<hr>');        
                                                                                $('#route_text_out').append('Выезд из начальной точки &rArr;');
                                                                                var time_trasse = 0;
                                                                                $.each(steps_route,function(index,value){
                                                                                                        $('#route_text_out').append('&rArr;');
                                                                                                        $('#route_text_out').append(value.html_instructions);
                                                                                                        $('#route_text_out').append(' - '+value.distance.text);
                                                                                                        $('#route_text_out').append(' примерно '+value.duration.text);
                                                                                                        time_trasse = time_trasse + parseInt(value.duration.text);
                                                                                                        $('#route_text_out').append('&rArr;');
                                                                                });
                                                                                 $('#route_text_out').append('<hr><p style="color: red;">Время по трассе: '+time_trasse+' min</p>');
                                            });
                                            //console.log(jsondata);
                                              }
                                              
                    });
                    
                    
                $.ajax({
                  dataType: 'json',
                  url: complex_uri2,
                  success: function(jsondata){
                       
                      
                                            var routes = jsondata.routes;
                                            $('#out_title_gootax').empty();
                                            $('#text_out_gootax').empty();
                                            $('#route_text_out_gootax').empty();
                                            $.each(routes,function(index,jsonres){
                                                                                var header_panel_info = jsonres.copyrights;
                                                                                $('#out_title_gootax').text(header_panel_info);
                                                                                var end_point = jsonres.legs[0].end_address;
                                                                                var start_point = jsonres.legs[0].start_address;
                                                                                var time_distance = jsonres.legs[0].duration.text;
                                                                                var time_distance_traffic = jsonres.legs[0].duration_in_traffic.text;
                                                                                var long_distance = jsonres.legs[0].distance.text;
                                                                                var steps_route = jsonres.legs[0].steps;
                                                                                $('#text_out_gootax').append('<hr>version '+index+'<hr>');
                                                                                $('#text_out_gootax').append('<p><span style="color: red;">Отправная точка:</span>&emsp;&emsp;&emsp;'+start_point+'</p>');
                                                                                $('#text_out_gootax').append('<p><span style="color: green;">Финиш:</span>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;'+end_point+'</p>');
                                                                                $('#text_out_gootax').append('<p><span style="color: blue;">Время в пути:</span>&emsp;&emsp;&emsp;&emsp;&emsp;'+time_distance+'</p>');
                                                                                $('#text_out_gootax').append('<p style="color: #e48100; font-weight: 900;"><span>Время с заторами:</span>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;'+time_distance_traffic+'</p>');
                                                                                $('#text_out_gootax').append('<p><span style="color: magenta;">Общее расстояние:</span>&emsp;&emsp;'+long_distance+'</p>');
                                                                                $('#route_text_out_gootax').append('<hr>version '+index+'<hr>');        
                                                                                $('#route_text_out_gootax').append('Выезд из начальной точки &rArr;');
                                                                                var time_trasse = 0;
                                                                                $.each(steps_route,function(index,value){
                                                                                                        $('#route_text_out_gootax').append('&rArr;');
                                                                                                        $('#route_text_out_gootax').append(value.html_instructions);
                                                                                                        $('#route_text_out_gootax').append(' - '+value.distance.text);
                                                                                                        $('#route_text_out_gootax').append(' примерно '+value.duration.text);
                                                                                                        time_trasse = time_trasse + parseInt(value.duration.text);
                                                                                                        $('#route_text_out_gootax').append('&rArr;');
                                                                                });
                                                                                 $('#route_text_out_gootax').append('<hr><p style="color: red;">Время по трассе: '+time_trasse+' min</p>');
                                            });
                                            //console.log(jsondata);
                                              }
                                              
                    });
                    
        })
    </script>
  </body>
</html>